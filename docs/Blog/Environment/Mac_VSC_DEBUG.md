---
comments: true
---
# ç”¨ Mac çš„ VSCode è°ƒè¯• C/C++ç¨‹åº

!!! info "ç¯å¢ƒ"
    MacOS: Ventura 13.2.1
    VSCode: 1.76.2 x64
    C/C++: 1.14.5
    CodeLLDB: 1.8.0
    Code Runner: 0.12.0

## C/C++

è¿™æ˜¯ä¸€ä¸ª VSCode æ’ä»¶ï¼Œå¯ç”¨åï¼Œä¼šåœ¨ VSCode ä¸­æ·»åŠ  C/C++çš„è¯­æ³•é«˜äº®ã€ä»£ç æç¤ºã€ä»£ç è·³è½¬ç­‰åŠŸèƒ½ã€‚
åŒæ—¶å³ä¸Šè§’å‡ºç°å¦‚ä¸‹å›¾æ ‡ï¼š
![](images/Mac_VSC_DEBUG/2023-04-05-23-25-33.png#pic)

é€‰æ‹© run çš„è¯ï¼Œæ’ä»¶å°±ä¼šæ¥ç€è®©æˆ‘ä»¬é€‰æ‹©ä½¿ç”¨çš„ç¼–è¯‘å™¨
![](images/Mac_VSC_DEBUG/2023-04-05-23-26-52.png#pic)

æ¯”å¦‚æˆ‘é€‰æ‹© clang++ï¼Œé‚£ä¹ˆæ’ä»¶å°±ä¼šåœ¨å½“å‰å·¥ä½œåŒºä¸‹è‡ªåŠ¨ç”Ÿæˆç›¸åº”çš„é…ç½®æ–‡ä»¶ï¼Œå¹¶å¼€å§‹è¿è¡Œã€‚

å¯¹äºè°ƒè¯•ï¼Œå¾ˆé—æ†¾çš„æ˜¯ï¼Œæˆ‘ä»¬çš„ç¨‹åºæ˜¯è¿è¡Œåœ¨ Debug Console ä¸­çš„ï¼Œè€Œä¸æ˜¯ç»ˆç«¯ä¸­ï¼Œè¿è¡Œåœ¨ debug console ä¸­çš„é—®é¢˜æ˜¯æ²¡æœ‰ stdin è®©æˆ‘ä»¬è¾“å…¥ã€‚

ç»è¿‡æŸ¥è¯¢ï¼Œå‘ç° Mac ä¸Š C/C++æ’ä»¶ä¸æ”¯æŒ debugger è¿è¡Œåœ¨å†…ç½®ç»ˆç«¯ä¸­ï¼Œsetting é‡Œä¹Ÿæ²¡æœ‰ä¿®æ”¹é€‰é¡¹ï¼Œåªèƒ½è¿è¡Œåœ¨ debug console æˆ–è€…å¤–éƒ¨ç»ˆç«¯ã€‚è¯¦è§[:octicons-link-16:å®˜ç½‘](https://code.visualstudio.com/docs/cpp/launch-json-reference)
![](images/Mac_VSC_DEBUG/2023-04-05-23-32-55.png#pic)


å¦‚æœå¸Œæœ›åœ¨å¤–éƒ¨ç»ˆç«¯è¿è¡Œè¿›è¡Œè¾“å…¥çš„è¯ï¼Œæˆ‘ä»¬è¦åœ¨ launch.json ä¸­é…ç½®ã€‚æ³¨æ„ï¼Œå½“å‰ç‰ˆæœ¬é»˜è®¤é…ç½®æ–‡ä»¶åªä¼šç”Ÿæˆ task.json,æ²¡æœ‰ launch.jsonï¼š
![](images/Mac_VSC_DEBUG/2023-04-05-23-34-15.png#pic)

é‚£æˆ‘ä»¬å°±å…ˆä»‹ç»ä¸€ä¸‹ task.json.è¿™é‡Œçš„ä¸€äº›å‚æ•°æ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼Œæ¯”å¦‚ argsï¼Œå°±æ˜¯ç¼–è¯‘æ—¶çš„å‚æ•°ï¼Œå…¶ä¸­`-g`å‚æ•°ï¼Œä¼šè®©ç¼–è¯‘å™¨ç”Ÿæˆè°ƒè¯•ä¿¡æ¯ï¼Œè¿™æ ·æ‰èƒ½è¿›è¡Œ debugã€‚è¿˜æœ‰ cwd å‚æ•°ï¼Œè¿è¡Œç¨‹åºçš„æ–‡ä»¶å¤¹ä½ç½®ï¼Œå¦‚æœä¸å†™çš„è¯ï¼Œå°±ä¼šé»˜è®¤åœ¨å½“å‰å·¥ä½œåŒºçš„æ ¹ç›®å½•ä¸‹è¿è¡Œï¼Œè€Œéç¨‹åºæ‰€åœ¨ç›®å½•ï¼Œè¿™åœ¨ä¸€äº›æ‰“å¼€æ–‡ä»¶çš„æ“ä½œä¸Šå¯èƒ½ä¼šå¯¼è‡´é—®é¢˜ã€‚æœ€åæ³¨æ„ä¸€ä¸‹ labelï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åˆ«çš„é…ç½®æ–‡ä»¶ä¸­é€šè¿‡è¿™ä¸ª label æ¥è°ƒç”¨è¿™ä¸ª taskã€‚

æˆ‘ä»¬æ–°å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ launch.jsonï¼šé€‰æ‹©ä¾§æ çš„ debug å›¾æ ‡ï¼Œç‚¹å‡»`create a launch.json file`:
![](images/Mac_VSC_DEBUG/2023-04-05-23-38-02.png#pic)

åˆšå¼€å§‹æ˜¯ç©ºçš„ï¼Œä»€ä¹ˆéƒ½æ²¡æœ‰ã€‚ç‚¹å‡»å³ä¸‹è§’çš„`Add Configuration`ï¼Œå°±æœ‰ä¸€äº›é€‰é¡¹ï¼Œè¿™é‡Œæœ‰æ’ä»¶ä¸ºæˆ‘ä»¬å‡†å¤‡çš„é»˜è®¤æ¨¡ç‰ˆï¼Œæˆ‘ä»¬é€‰æ‹©`C/C++ lldbï¼ˆå¯åŠ¨ï¼‰`ï¼Œæ„æ€æ˜¯ C/C++æ’ä»¶æä¾›çš„ï¼Œå¯åŠ¨ä¸€ä¸ªæ–°çš„å¯æ‰§è¡Œæ–‡ä»¶å¹¶å¯¹å…¶ debug çš„é…ç½®ï¼Œé€‰æ‹©é™„åŠ çš„è¯æ˜¯é™„åŠ åˆ°ä¸€ä¸ªå·²ç»åœ¨æ‰§è¡Œçš„è¿›ç¨‹ä¸Šçš„ï¼š
![](images/Mac_VSC_DEBUG/2023-04-05-23-39-19.png#pic)

é»˜è®¤çš„æ¨¡æ¿é•¿è¿™ä¸ªæ ·å­ï¼š
![](images/Mac_VSC_DEBUG/2023-04-05-23-40-26.png#pic)

è¿™å¹¶ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œé¦–å…ˆä¿®æ”¹ program ä¸º
```
"program": "${workspaceFolder}/${fileBasenameNoExtension}",
```
ï¼Œè¿™æ ·ä»–è¿è¡Œçš„å°±ä¼šæ˜¯å½“å‰ç›®å½•ä¸‹çš„å½“å‰æ–‡ä»¶ï¼ˆä¸€èˆ¬å°±æ˜¯å…‰æ ‡æ‚¬åœçš„é‚£ä¸ªæ–‡ä»¶ï¼‰åŒåçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆæ„æ€å°±æ˜¯æ²¡åç¼€ï¼‰ï¼Œå¦‚æœæˆ‘ä»¬ç¼–è¯‘å‡ºæ¥çš„å¯æ‰§è¡Œæ–‡ä»¶å«åš`a.out`ï¼Œè¿™ä¸ªé…ç½®å°±ä¸é€‚ç”¨ï¼ˆä¼šè°ƒç”¨`a`ï¼‰ï¼Œè¯·åœ¨é…ç½®ä¸­ä¿®æ”¹ä¸º`/a.out`æˆ–è€…è®©ç¼–è¯‘å‡ºæ¥çš„å¯æ‰§è¡Œæ–‡ä»¶åä¸º`a`ã€‚

æ–°åŠ ä¸€åˆ—`preLaunchTask`ï¼Œå€¼å°±æ˜¯ä¹‹å‰ task.json ä¸Šçš„ labelï¼Œè¿™æ ·å°±ä¼šåœ¨è¿è¡Œå‰å¯æ‰§è¡Œæ–‡ä»¶å‰å…ˆè¿è¡Œ task ç¼–è¯‘å½“å‰æ–‡ä»¶ï¼ˆè¿™æ ·æ¯”è¾ƒæ–¹ä¾¿ï¼Œè‡ªåŠ¨æŠŠæœ€æ–°çš„æºä»£ç ç¼–è¯‘ï¼Œè¦å¤šæ–‡ä»¶ç¼–è¯‘çš„è¯ä¹Ÿåœ¨ task è®¾ç½®ã€‚å¦‚æœä¸ä½¿ç”¨ task æ‰‹åŠ¨ç¼–è¯‘çš„è¯ï¼Œè®°å¾—åŠ ä¸Š-gï¼‰ã€‚æœ€åï¼Œæˆ‘ä»¬è¦æŠŠ`"externalConsole": false,`æ”¹ä¸º`"externalConsole": true,`ï¼Œè¿™æ ·å°±ä¼šåœ¨å¤–éƒ¨ç»ˆç«¯ä¸­è¿è¡Œäº†ã€‚
![](images/Mac_VSC_DEBUG/2023-04-05-23-45-03.png#pic)

ç¬”è€…åˆ°è¿™ä¸€æ­¥å°±å¯ä»¥åœ¨å¤–éƒ¨ç»ˆç«¯ debug å•¦ï¼Œä¹Ÿå¯ä»¥åœ¨ watch çª—å£æ‰§è¡Œå‘½ä»¤æ¥ç›‘è§†å˜é‡ï¼Œå¦‚å…¨å±€å˜é‡ä¸€ç±»çš„ï¼Œä½†æ˜¯ C/C++å¯¹ä¸€äº›ç±»å‹çš„å˜é‡çš„ç›‘è§†æ”¯æŒä¸æ˜¯å¾ˆå¥½ï¼Œæ¯”å¦‚è¯´ stringï¼š
![](images/Mac_VSC_DEBUG/2023-04-05-23-47-26.png#pic)
ç›‘è§†ä¿¡æ¯å°±æ˜¯ä¸€å¨ã€‚

## Code Runner

å¦ä¸€ä¸ª VSCode æ’ä»¶ï¼Œå¯ç”¨åå³ä¸Šè§’åˆä¼šå¤šä¸€ä¸ªæ ‡ï¼š
![](images/Mac_VSC_DEBUG/2023-04-05-23-49-08.png#pic)

è¿™ä¸ªæ˜¯å¯ä»¥è·‘åœ¨å†…ç½®ç»ˆç«¯é‡Œçš„ï¼š
![](images/Mac_VSC_DEBUG/2023-04-05-23-49-51.png#pic)

## CodeLLDB ğŸ‘

è¿™ä¸ªæ’ä»¶ä¹Ÿå¯ä»¥è¿›è¡Œ debugï¼Œæˆ‘æ„Ÿè§‰æ¯” C/C++å¥½ç”¨å¤šäº†ã€‚

å¯ç”¨æ’ä»¶åï¼Œæˆ‘ä»¬åœ¨ launch.json ä¸­å¯é€‰é…ç½®å°±å¤šäº†å‡ ä¸ªï¼Œæˆ‘ä»¬ä½¿ç”¨`CodeLLDB (launch)`æ¨¡æ¿ï¼š
![](images/Mac_VSC_DEBUG/2023-04-05-23-51-28.png#pic)

åŒæ ·ç¨å¾®ä¿®æ”¹ï¼š
![](images/Mac_VSC_DEBUG/2023-04-05-23-52-33.png#pic)

å›åˆ°ä¾§è¾¹æ  debug æ¨¡å—ï¼Œé€‰æ‹©æ–°çš„å¯åŠ¨é…ç½®ï¼ˆè¿™é‡Œé€‰çš„æ˜¯ launch.json é‡Œå†™å¥½çš„å‡ ä¸ªé…ç½®ï¼‰ï¼š
![](images/Mac_VSC_DEBUG/2023-04-05-23-53-05.png#pic)

è¿™ä¼šåœ¨æˆ‘ä»¬å¯ç”¨ debug çš„æ—¶å€™å» launch.json é‡Œé¢æ‰¾æˆ‘ä»¬æŒ‡å®šçš„é…ç½®ï¼Œç„¶åè¿›è¡Œ debugã€‚

!!! warning "æœ‰æ—¶å€™ debug å¼¹å‡ºå¥‡æ€ªçš„æŠ¥é”™ï¼Œæ˜¯å› ä¸ºå½“å‰æ‰“å¼€çš„æ˜¯é…ç½®æ–‡ä»¶ï¼Œè¯•å›¾å¯¹ launch.json è¿›è¡Œ debugï¼Œæ‰€ä»¥æŠ¥é”™äº†ã€‚æˆ‘ä»¬æ‰“å¼€è¦ debug çš„æºä»£ç æ–‡ä»¶å°±å¥½äº†ã€‚"

CodeLLDB å¯ä»¥ä½¿ç”¨å†…ç½®ç»ˆç«¯ï¼š
![](images/Mac_VSC_DEBUG/2023-04-06-00-00-07.png#pic)

å¯ä»¥åœ¨ç›‘è§†é‡Œç›´æ¥ç”¨å˜é‡åç›‘è§†å˜é‡ï¼š
![](images/Mac_VSC_DEBUG/2023-04-06-00-00-37.png#pic)

å¯ä»¥åœ¨ debug console ä¸­è¾“å…¥å‘½ä»¤ï¼š
![](images/Mac_VSC_DEBUG/2023-04-06-00-01-06.png#pic)

å˜é‡é‡Œçš„å­—ç¬¦ä¸²æ”¯æŒä¹Ÿå¥½ä¸€äº›ï¼š
![](images/Mac_VSC_DEBUG/2023-04-06-00-01-51.png#pic)

[:octicons-link-16:è¿™é‡Œ](https://github.com/vadimcn/codelldb/blob/master/MANUAL.md)è¿˜æœ‰å®˜æ–¹æ–‡æ¡£ï¼Œå¯ä»¥çœ‹çœ‹ã€‚

!!! info "æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ª task.json"
    åœ¨èœå• terminal > Configure Tasks é€‰æ‹© C/C++æ¥ç”Ÿæˆæ¨¡æ¿

---
comments: true
authors:
    - stormckey
categories:
    - Lab
    - 计算机网络
date: 2023-11-25
nostatistics: true
---

# 计算机网络 - lab2 使用二层交换机组网

!!! abstract
    因为这个实验做的时候几乎没什么指导，只有一个神秘的文档，一整个实验室的线和一箱子的神秘机器，所以就激情写个经验

    主要是讲了讲怎么让实验跑起来，还有各种意外问题的处理之类的

<!-- more -->

!!! info "基本信息"
    实验时间：2023 年秋冬

    实验报告模板：[:octicons-file-16:](https://github.com/stormckey/stormckey.github.io/blob/main/resource/%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%E6%A8%A1%E7%89%88_%E5%AE%9E%E9%AA%8C2.doc)

    往期参考：[:octicons-file-16:](https://github.com/QSCTech/zju-icicles/raw/master/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/Lab/Lab2-%E4%BD%BF%E7%94%A8%E4%BA%8C%E5%B1%82%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%BB%84%E7%BD%91/Lab2-%E4%BD%BF%E7%94%A8%E4%BA%8C%E5%B1%82%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%BB%84%E7%BD%91.doc) （来自浙江大学课程共享计划）

    指导老师：黄正谦


## 认识实验室的仪器

果咩那塞这里没有照片，但是比较关键的几个设备的外观都会大概描述一下：

=== "交换机"
    正面有很多端口，没有开关键，正面有 mode 键

=== "路由器"
    暂时用不到，比起交换机端口没那么多，有开关键

=== "网线"
    实验室里看起来是网线的基本就是网线（废话）,

    比较特殊的事如果两端透明头内部的线的颜色顺序不一样，那就是交叉网线。

    如果一根扁扁的淡蓝色的，另一端是串口的线，那个是拿来连 console 和 PC 的。

=== "PC"
    机箱里上方连着摆了四台 PC,一般从上往下标号 1-4

    开机方式很迷，我是按 F1 然后退出，感觉肯定不是正常途径

=== "显示屏和键盘"
    最下面摆着的显示屏和键盘，通过按键选择可以连接到不同的 PC,顺着显示屏的线往后可以看到四台 PC 在后面是插到了 1-4 口上的（我当时是没有 PC4,有 PC5 插在 5 上面，我给改插到 4 了）

## 起步

其实也就起步是最难的，后面基本就按照文档来做就是。

### 连不上交换机

连接交换机要做的有：

- 用前文提到的串口-网口线来连接某 PC 和交换机的 console、
- 切换到那台 PC, 打开桌面上的 putty, 选择 serial,默认速率 9600 即可，启动
- 狂按回车，出现命令行提示符就成功了，没反应用手扶一下 console 看一下插紧了没有

就我而言，机箱里的下面的一台交换机是死活连不上，最后试了半天是上面的另一台交换机用手扶稳了可以上。

如果你试了很多都不行的话，可以在实验室里溜达一圈多摸几个交换机回来.我们第二次摸了两台白色的小小的交换机来用。

### 交换机密码

我们摸来的两台交换机都要求 enable 密码，重置密码的方法摸的比较熟了，注意适用的是小型白色交换机，正面型号写着 C3560
步骤：

- 连接 console 和 PC,打开 putty,断电
- 长按 mode 键，上电
- 继续按 mode,等待，putty 上应该陆续有初始化的输出了，眼尖的还能看到 password recovery mechanism is enabled,看到这句话继续按
- 继续按 mode 直到屏幕上出现 switch: 提示符和两个选项(flash_init, boot)
- 先`flash_init`,然后`ren flash:config.text flash:config.old`,然后`boot`
- 等待重启，注意到差不多完了会让按回车确认，按完有个是否进入初始化配置，输入 no
- 重置成功

### 设定 PC 的 IP

实验开始前我们要查看各 PC 的 IP,`win + R`,输入 cmd 打开命令行，输入`ipconfig`就能看到 ip 了，没有的话检查连接，看看信号灯变绿了没有。

一般而言 PC 的 IP 都挺正常的，互相之间都通（比较正常的 IP 10.0.0.13 10.0.1.13 10.0.2.13 10.0.3.13 他们显然都通）

然而我当时两个 PC 是 10 开头两个是 192 开头，不通，需要手动设定

这时候千万别去 putty 里面敲命令设置，我这么搞四台 PC 全断联了，要在 windows 的控制面板里设置，具体步骤网上都有，要把四台放到同一网段。

!!! warning "恭喜"
    接下来就可以跟着文档一步步走完实验了。

